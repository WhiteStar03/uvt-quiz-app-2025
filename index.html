<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Taking Platform</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Knowledge Assessment Platform (Testing Bachelor Thesis Questions for English Informatics)</h1>

        <div class="dashboard-screen" id="dashboardScreen">
            <h2 style="text-align: center; color: #555; margin-bottom: 30px;">Platform Dashboard</h2>
            <div class="dashboard-stats">
                <div class="stat-item">
                    <h3 id="totalQuestionsStat">0</h3>
                    <p>Total Questions</p>
                </div>
                <div class="stat-item">
                    <h3 id="totalCategoriesStat">0</h3>
                    <p>Total Subtopics</p>
                </div>
            </div>
            <div class="dashboard-actions">
                <button class="nav-button" onclick="showCategorySelectionScreen()">Select Subtopic Test</button>
                <button class="nav-button secondary" onclick="generateRandomTest()">Generate Random 30-Question Test</button>
                <button class="nav-button" onclick="showCustomTestSelection()">Create Custom 30-Question Test</button>
            </div>
            <div id="dashboardLoading" class="loading" style="display:none;">Loading data...</div>
        </div>

        <div class="category-selection" id="categoryScreen">
            <h2 style="text-align: center; color: #666; margin-bottom: 20px;">Select a Subtopic</h2>
            <div class="category-grid" id="categoryGrid">
                <div class="loading">Loading categories...</div>
            </div>
            <button class="nav-button secondary" style="display: block; margin: 20px auto 0;" onclick="showDashboard()">Back to Dashboard</button>
        </div>

        <div class="custom-test-selection" id="customTestScreen">
            <h2 style="text-align: center; color: #666; margin-bottom: 20px;">Create Custom 30-Question Test</h2>
            <p style="text-align: center; color: #777; margin-bottom: 20px;">Select categories to include in your custom test:</p>
            
            <div class="custom-test-categories" id="customTestCategories">
                <div class="loading">Loading categories...</div>
            </div>
            
            <div class="custom-test-actions">
                <div class="selected-info" id="selectedCategoriesInfo">
                    Selected: <span id="selectedCount">0</span> categories, <span id="selectedQuestionCount">0</span> questions available
                </div>
                <div class="button-group">
                    <button class="nav-button" id="generateCustomTestBtn" onclick="generateCustomTest()" disabled>
                        Generate Custom Test (30 questions)
                    </button>
                    <button class="nav-button secondary" onclick="showDashboard()">Back to Dashboard</button>
                </div>
            </div>
        </div>

        
        <div class="test-screen" id="testScreen">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="question-container">
                <div class="question-header">
                    <div>
                        <span class="question-number" id="questionNumber"></span>
                        <span style="color: #666; margin-left:10px;" id="categoryName"></span>
                    </div>
                    <span id="timerDisplay"></span>
                    <button id="quitTestButton" class="quit-button" onclick="handleQuitTest()" title="Quit Test">Ã—</button>
                </div>
                <div class="question-text" id="questionText"></div>
                <div id="questionImageContainer" style="text-align: center; margin-top: 10px;"></div>
                <div class="options" id="optionsContainer"></div>
            </div>

            <div class="navigation">
                <div class="navigation-controls">
                    <button class="nav-button secondary" id="prevButton" onclick="previousQuestion()">Previous</button>
                    <span id="questionStatus"></span>
                    <button class="nav-button" id="nextButton">Next</button>
                </div>
                <input type="range" id="questionSlider" min="0" value="0" class="question-slider">
            </div>
        </div>

    
        <div class="results-screen" id="resultsScreen">
            <h2 style="color: #333; margin-bottom: 30px;">Test Complete!</h2>
            <div class="score-circle">
                <svg width="200" height="200">
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="0%" y2="100%">
                            <stop offset="0%" style="stop-color:#667eea;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#764ba2;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <circle cx="100" cy="100" r="85" class="score-circle-bg"></circle>
                    <circle cx="100" cy="100" r="85" class="score-circle-progress" id="scoreCircle"></circle>
                </svg>
                <div class="score-text" id="scoreText">0%</div>
            </div>
            <div class="results-summary" id="resultsSummary"></div>
            <div class="results-actions">
                <button class="nav-button" onclick="showReview()">Review Answers</button>
                <button class="nav-button secondary" onclick="resetTest()">Back to Dashboard</button>
            </div>
            <div class="answer-review" id="answerReview" style="display: none;"></div>
        </div>

        <div class="made-by-footer">
            Made by Paul
        </div>
    </div>

    <script src="script.js"></script>

    <div id="imageZoomModal" class="image-zoom-modal">
        <span class="close-zoom-btn" id="closeZoomBtn">&times;</span>
        <img class="image-zoom-modal-content" id="zoomedImage">
    </div>
</body>
</html>